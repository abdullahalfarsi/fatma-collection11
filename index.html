<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…ØªØ¬Ø± ÙØ§Ø·Ù…Ù‡</title>
<style>
body { margin:0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background:#f5f5f7; }
header { background:rgb(85, 63, 2); padding:15px 20px; display:flex; flex-wrap:wrap; justify-content:space-between; align-items:center; box-shadow:0 2px 6px #0001; position:relative; border-bottom:3px solid rgb(255,165,0); }
.logo { display:flex; align-items:center; gap:10px; }
.logo-box { width:45px; height:45px; background:linear-gradient(135deg,#010005,#948928); border-radius:12px; color:white; display:flex; align-items:center; justify-content:center; font-weight:bold; font-size:20px; }
.container { max-width:1200px; margin:auto; padding:20px; display:grid; grid-template-columns:1fr 3fr; gap:20px; }
aside { background:#f9f5ef; padding:20px; border-radius:16px; box-shadow:0 4px 12px rgba(0,0,0,0.1); transition:0.3s; }
aside:hover { box-shadow:0 6px 18px rgba(0,0,0,0.15); }
aside h3 { color:rgb(85, 63, 2); margin-bottom:10px; font-size:18px; border-bottom:2px solid rgb(255,165,0); padding-bottom:5px; }
.btn { padding:10px 15px; border:1px solid #ddd; border-radius:12px; background:white; cursor:pointer; transition:0.3s all; font-size:14px; margin:5px 0; width:100%; text-align:center; }
.btn:hover { transform:translateY(-2px); background:rgb(255,245,220); box-shadow:0 3px 6px rgba(0,0,0,0.1); }
.btn.active { background:rgb(255,200,0); border-color:rgb(255,165,0); color:white; box-shadow:0 4px 8px rgba(0,0,0,0.2); }
.colors { display:flex; flex-wrap:wrap; gap:5px; margin-top:5px; }
.colors button { flex:1 1 30%; padding:8px; border:1px solid #ccc; border-radius:10px; cursor:pointer; transition:0.3s; font-size:13px; font-weight:bold; background:#2b2b2b; color:white; box-shadow:0 2px 5px rgba(0,0,0,0.3); }
.colors button:hover { transform:scale(1.05); box-shadow:0 4px 10px rgba(0,0,0,0.4); }
.colors button.active { border:2px solid rgb(255,165,0); background:rgb(255,200,0); color:white; box-shadow:0 4px 10px rgba(0,0,0,0.5); }
.product-grid { display:grid; grid-template-columns:repeat(auto-fill, minmax(200px,1fr)); gap:15px; }
.card { background:rgb(85, 63, 2); border-radius:16px; padding:15px; box-shadow:0 2px 6px rgba(0,0,0,0.2); color:white; display:flex; flex-direction:column; justify-content:space-between; transition:0.3s; }
.card:hover { transform:translateY(-5px); box-shadow:0 6px 15px rgba(0,0,0,0.3); }
.card-img { height:160px; background:#eee; border-radius:12px; display:flex; align-items:center; justify-content:center; margin-bottom:10px; overflow:hidden; }
.card-img img { width:100%; height:100%; object-fit:cover; border-radius:10px; }
.modal { position:fixed; inset:0; background:#0008; display:flex; align-items:center; justify-content:center; opacity:0; visibility:hidden; transition:opacity 0.3s ease, visibility 0.3s; z-index:1000; }
.modal.show { opacity:1; visibility:visible; }
.modal-box { background:white; padding:20px; border-radius:16px; width:90%; max-width:400px; text-align:center; box-shadow:0 5px 15px rgba(0,0,0,0.3); transform: scale(0.8); transition: transform 0.3s ease; }
.modal.show .modal-box { transform: scale(1); }
.thumbnail { width:45px; height:45px; margin:5px; border:1px solid #ddd; cursor:pointer; object-fit:cover; border-radius:8px; transition:0.3s; }
.thumbnail.active { border:2px solid rgb(85,63,2); transform:scale(1.1); }
#cartIcon { position:absolute; top:15px; left:50%; transform:translateX(-50%); width:50px; height:50px; background:rgb(255,165,0); border-radius:50%; display:flex; align-items:center; justify-content:center; cursor:pointer; font-weight:bold; color:white; font-size:18px; box-shadow:0 2px 5px #0003; z-index:1001; transition:0.3s; }
#cartIcon:hover { transform:scale(1.1); }
#cartDropdown { display:none; position:absolute; top:75px; left:50%; transform:translateX(-50%); background:#fff; border-radius:16px; padding:15px; width:90%; max-width:350px; box-shadow:0 8px 20px rgba(0,0,0,0.25); z-index:1001; transition:0.3s; }
.cart-item { display:flex; align-items:center; justify-content:space-between; background:#f5f5f5; padding:10px; border-radius:12px; margin-bottom:10px; box-shadow:0 2px 5px rgba(0,0,0,0.1); transition:0.2s; }
.cart-item:hover { box-shadow:0 4px 10px rgba(0,0,0,0.15); }
.cart-item img { width:50px; height:50px; object-fit:cover; border-radius:10px; margin-right:10px; }
.cart-item-details { flex:1; display:flex; flex-direction:column; gap:2px; }
.cart-item-details span { font-size:14px; font-weight:600; }
.cart-item-controls { display:flex; align-items:center; gap:5px; }
.cart-item-controls button { padding:4px 8px; font-size:13px; border-radius:6px; border:none; background:rgb(85,63,2); color:#fff; cursor:pointer; transition:0.2s; }
.cart-item-controls button:hover { background:rgb(255,165,0); }
.cart-item-controls span { font-weight:bold; padding:0 5px; }
.cart-total { text-align:center; font-weight:bold; margin-top:10px; padding-top:10px; border-top:1px solid #ddd; font-size:16px; }
#checkoutPage { display:none; padding:20px; max-width:600px; margin:auto; }
#checkoutPage input { width:100%; margin:5px 0; padding:8px; border-radius:8px; border:1px solid #ddd; font-size:14px; }
#checkoutPage button { padding:10px 15px; border:none; border-radius:10px; background:rgb(85,63,2); color:white; cursor:pointer; margin-top:10px; font-size:14px; transition:0.3s; }
#checkoutPage button:hover { transform:scale(1.05); box-shadow:0 4px 10px rgba(0,0,0,0.2); }
#offers { display:flex; gap:10px; overflow-x:auto; margin-bottom:20px; }
#offers div { min-width:180px; padding:10px; border-radius:12px; text-align:center; font-weight:bold; flex-shrink:0; font-size:14px; transition:0.3s; cursor:pointer; }
#offers div:hover { transform:scale(1.05); box-shadow:0 3px 6px rgba(0,0,0,0.15); }
.offer1 { background:rgb(255,200,0); }
.offer2 { background:rgb(255,100,0); }
.offer3 { background:rgb(0,150,255); color:white; }
.currency-options { display:flex; flex-wrap:wrap; gap:10px; margin-top:10px; }
.currency-btn { flex:1 1 45%; padding:10px 12px; background:rgb(245,245,245); border-radius:12px; border:2px solid #ddd; text-align:center; cursor:pointer; font-weight:bold; transition:0.3s all; display:flex; align-items:center; justify-content:center; gap:6px; font-size:14px; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
.currency-btn .flag { font-size:18px; }
.currency-btn:hover { transform:scale(1.05); background:rgb(255,215,0); color:white; box-shadow:0 4px 10px rgba(0,0,0,0.2); }
.currency-btn.active { background:rgb(255,200,0); color:white; border-color:rgb(255,165,0); box-shadow:0 4px 12px rgba(0,0,0,0.3); }
/* Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø© */
@keyframes flyToCart {
  0% { transform:translate(0,0) scale(1); opacity:1; }
  100% { transform:translate(var(--x), var(--y)) scale(0.2); opacity:0; }
}
.fly-img {
  position:absolute; width:80px; height:80px; border-radius:12px; pointer-events:none; z-index:2000; animation:flyToCart 0.8s forwards;
}
@media (max-width:768px){
  header { flex-direction:column; gap:10px; padding:10px; }
  #search { width:100%; max-width:100%; margin-top:10px; }
  .container { grid-template-columns:1fr; padding:10px; }
  aside { width:100%; margin-bottom:20px; padding:10px; }
  .product-grid { grid-template-columns:repeat(auto-fill, minmax(140px,1fr)); gap:10px; }
  .card-img { height:120px; }
  .thumbnail { width:35px; height:35px; }
  #cartIcon { top:10px; width:45px; height:45px; font-size:16px; }
  #cartDropdown { top:65px; width:95%; }
  #offers div { min-width:150px; font-size:13px; }
  .btn { padding:6px 8px; font-size:13px; }
  .modal-box { padding:15px; width:95%; }
  .modal-box h2 { font-size:16px; }
  .colors button { font-size:12px; }
}
</style>
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
</head>
<body>

<div id="invoicePage" style="display:none; padding:20px; max-width:650px; margin:auto; animation:fadeIn 0.6s;">
  <div style="background:linear-gradient(135deg,#fff8e1,#fff1c6); border-radius:20px; box-shadow:0 8px 25px rgba(0,0,0,0.25); padding:25px; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color:#333;">
    
    <!-- Ø´Ø¹Ø§Ø± Ø§Ù„Ù…ØªØ¬Ø± -->
    <div style="text-align:center; margin-bottom:20px;">
      <div style="width:60px; height:60px; margin:auto; background:linear-gradient(135deg,#010005,#948928); border-radius:15px; color:white; display:flex; align-items:center; justify-content:center; font-weight:bold; font-size:28px;">F</div>
      <h2 style="margin:10px 0 0 0; color:rgb(85,63,2); font-size:22px;">ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ø´Ø±Ø§Ø¡ - FATMA COLLECTION</h2>
      <small style="color:rgb(85,63,2); font-size:12px;">Ù…ØªØ¬Ø± Ù„Ù„Ù…Ù„Ø§Ø¨Ø³ ÙˆØ§Ù„Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª</small>
    </div>

    <!-- Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
    <div id="invoiceProducts" style="margin-bottom:20px;"></div>

    <!-- Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ -->
    <div style="text-align:right; font-weight:bold; font-size:18px; margin-bottom:20px;">
      Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ: <span id="invoiceTotal">0</span> <span id="invoiceCurrency">Ø±.Ø¹</span>
    </div>

    <!-- Ø²Ø± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© -->
    <button onclick="printInvoice()" style="display:block; margin:auto; padding:12px 20px; background:rgb(255,200,0); color:white; border:none; border-radius:12px; cursor:pointer; font-size:15px; font-weight:bold; transition:0.3s; box-shadow:0 4px 10px rgba(0,0,0,0.2);">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„ÙØ§ØªÙˆØ±Ø©</button>
<div id="orderSuccessBox" style="display:none;margin-top:15px;padding:15px;border-radius:10px;background:#e8fff1;border:1px solid #2ecc71;color:#145a32;font-size:15px;">
  ğŸ’Œ <strong>ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­</strong><br>
  <span id="orderNumberText"></span>
</div>

<!-- ===== Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ ===== -->
<div style="margin-top:15px;text-align:center">
  <input id="manualEmail" type="email" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ"
    style="width:90%;max-width:350px;padding:10px;border-radius:10px;border:1px solid #ccc;margin-bottom:10px">
  <br>
  <button type="button" onclick="sendInvoiceEmail()"
    style="padding:10px 20px;border:none;border-radius:12px;background:#25c16f;color:#fff;font-weight:bold;cursor:pointer">
    ğŸ“§ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„
  </button>
<div id="orderSuccessBox" style="display:none;margin-top:15px;padding:15px;border-radius:10px;background:#e8fff1;border:1px solid #2ecc71;color:#145a32;font-size:15px;">
  ğŸ’Œ <strong>ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­</strong><br>
  <span id="orderNumberText"></span>
</div>
</div>

  </div>
</div>

<style>
@keyframes fadeIn {
  0% {opacity:0; transform:translateY(-20px);}
  100% {opacity:1; transform:translateY(0);}
}
.invoice-item {
  display:flex;
  justify-content:space-between;
  padding:10px 15px;
  border-radius:12px;
  background:rgba(255,255,255,0.8);
  margin-bottom:10px;
  box-shadow:0 3px 8px rgba(0,0,0,0.1);
  font-size:15px;
  transition:0.3s;
}
.invoice-item:hover { background:rgba(255,255,255,1); transform:scale(1.02);}
.invoice-item span { display:inline-block; }
</style>

<header>
  <div class="logo">
    <div class="logo-box">F</div>
    <div>
      <h2 style="margin:0; font-size:18px;"> FATMA COLLECTION </h2>
      <small style="color:#000000; font-size:12px;">Ù…ØªØ¬Ø± Ù„Ù„Ù…Ù„Ø§Ø¨Ø³ Ø§Ù„Ø±Ø¬Ø§Ù„ÙŠØ© ÙˆØ§Ù„Ù†Ø³Ø§Ø¦ÙŠØ© ÙˆØ¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª Ø§Ù„Ù‡Ø§ØªÙ</small>
    </div>
  </div>
  <input id="search" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬" />
  <div id="cartIcon" onclick="toggleCart()">ğŸ›’<span id="cartCount">0</span></div>
  <div id="cartDropdown"><div id="cartContent"></div><div class="cart-total">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: <span id="cartTotal">0</span> Ø±.Ø¹</div><button onclick="goToCheckout()">Ø§Ù„Ø¯ÙØ¹</button></div>
</header>

<div id="mainContent">
<div class="container">
  <aside>
    <h3>Ø§Ù„ÙØ¦Ø§Øª</h3>
    <button class="btn active" onclick="filterCategory('all')">Ø§Ù„ÙƒÙ„</button>
<div id="orderSuccessBox" style="display:none;margin-top:15px;padding:15px;border-radius:10px;background:#e8fff1;border:1px solid #2ecc71;color:#145a32;font-size:15px;">
  ğŸ’Œ <strong>ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­</strong><br>
  <span id="orderNumberText"></span>
</div>
    <button class="btn" onclick="filterCategory('jacket')">Ø§Ù„Ø¬Ø§ÙƒÙŠØªØ§Øª | jacket</button>
<div id="orderSuccessBox" style="display:none;margin-top:15px;padding:15px;border-radius:10px;background:#e8fff1;border:1px solid #2ecc71;color:#145a32;font-size:15px;">
  ğŸ’Œ <strong>ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­</strong><br>
  <span id="orderNumberText"></span>
</div>
    <button class="btn" onclick="filterCategory('case')"> ÙƒÙØ±Ø§Øª Ø§Ù„Ø¬ÙˆØ§Ù„ | case</button>
<div id="orderSuccessBox" style="display:none;margin-top:15px;padding:15px;border-radius:10px;background:#e8fff1;border:1px solid #2ecc71;color:#145a32;font-size:15px;">
  ğŸ’Œ <strong>ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­</strong><br>
  <span id="orderNumberText"></span>
</div>
    <button class="btn" onclick="filterCategory('glases')">Ø§Ù„Ù†Ø¸Ø§Ø±Ø§Øª | glasses </button>
<div id="orderSuccessBox" style="display:none;margin-top:15px;padding:15px;border-radius:10px;background:#e8fff1;border:1px solid #2ecc71;color:#145a32;font-size:15px;">
  ğŸ’Œ <strong>ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­</strong><br>
  <span id="orderNumberText"></span>
</div>
    <button class="btn" onclick="filterCategory('shoes')">Ø§Ù„Ø´ÙˆØ²Ø§Øª | shoes </button>
<div id="orderSuccessBox" style="display:none;margin-top:15px;padding:15px;border-radius:10px;background:#e8fff1;border:1px solid #2ecc71;color:#145a32;font-size:15px;">
  ğŸ’Œ <strong>ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­</strong><br>
  <span id="orderNumberText"></span>
</div>
    <hr>
    <h3>Ø§Ù„Ù„ÙˆÙ†</h3>
    <div class="colors" id="colorFilter"></div>
    <hr>
    <h3>Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…Ù„Ø©</h3>
    <div class="currency-options">
      <div class="currency-btn active" data-currency="OMR" onclick="selectCurrency(this)"><span class="flag">ğŸ‡´ğŸ‡²</span> Ø±.Ø¹</div>
      <div class="currency-btn" data-currency="USD" onclick="selectCurrency(this)"><span class="flag">ğŸ‡ºğŸ‡¸</span> $</div>
      <div class="currency-btn" data-currency="SAR" onclick="selectCurrency(this)"><span class="flag">ğŸ‡¸ğŸ‡¦</span> Ø±.Ø³</div>
      <div class="currency-btn" data-currency="AED" onclick="selectCurrency(this)"><span class="flag">ğŸ‡¦ğŸ‡ª</span> Ø¯.Ø¥</div>
      <div class="currency-btn" data-currency="KWD" onclick="selectCurrency(this)"><span class="flag">ğŸ‡°ğŸ‡¼</span> Ø¯.Ùƒ</div>
      <div class="currency-btn" data-currency="QAR" onclick="selectCurrency(this)"><span class="flag">ğŸ‡¶ğŸ‡¦</span> Ø±.Ù‚</div>
      <div class="currency-btn" data-currency="BHD" onclick="selectCurrency(this)"><span class="flag">ğŸ‡§ğŸ‡­</span> Ø¯.Ø¨</div>
    </div>
  </aside>

  <section>
    <h1>Ø§Ù„Ø¹Ø±ÙˆØ¶ ÙˆØ§Ù„Ø®ØµÙˆÙ…Ø§Øª</h1>
    <div id="offers">
      <div class="offer1">Ø®ØµÙ… 20% Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒÙØ±Ø§Øª!</div>
      <div class="offer2">Ø§Ø´ØªØ±Ù Ø¬Ø§ÙƒÙŠØªÙŠÙ† ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø«Ø§Ù„Ø« Ù…Ø¬Ø§Ù†Ø§Ù‹!</div>
      <div class="offer3">Ø´Ø­Ù† Ù…Ø¬Ø§Ù†ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø·Ù„Ø¨Ø§Øª ÙÙˆÙ‚ 50 Ø±.Ø¹</div>
    </div>
    <h1>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h1>
    <div class="product-grid" id="products"></div>
  </section>
</div>
</div>

<div id="checkoutPage">
  <h2>ØµÙØ­Ø© Ø§Ù„Ø¯ÙØ¹</h2>
  <div id="checkoutProducts"></div>
  <form id="checkoutForm">
    <input type="text" placeholder="Ø§Ù„Ø£Ø³Ù…" required>
    <input type="tel" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" required>
    <input type="text" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù†" required>
    <input type="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø£Ù„ÙƒØªØ±ÙˆÙ†ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">
    <button type="submit">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø¯ÙØ¹</button>
<div id="orderSuccessBox" style="display:none;margin-top:15px;padding:15px;border-radius:10px;background:#e8fff1;border:1px solid #2ecc71;color:#145a32;font-size:15px;">
  ğŸ’Œ <strong>ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­</strong><br>
  <span id="orderNumberText"></span>
</div>
  </form>
</div>

<div class="modal" id="modal"><div class="modal-box" id="modalBox"></div></div>

<script>
const products = [
  {id:'j1',type:'jacket',title:'Ø¬Ø§ÙƒÙŠØª Ø´ØªÙˆÙŠ',price:20,colors:['Ø£Ø³ÙˆØ¯','Ø¨Ù†ÙŠ','Ø£Ø¨ÙŠØ¶'],images:{'Ø£Ø³ÙˆØ¯':['images/IMG_9748.png'],'Ø£Ø¨ÙŠØ¶':['images/IMG_9749.png'],'Ø¨Ù†ÙŠ':['images/index.html.png']}},
  {id:'j2',type:'jacket',title:'Ø¨Ù„ÙˆÙØ± Ø´ØªÙˆÙŠ',price:149,colors:['Ø¨ÙŠØ¬'],images:{'Ø¨ÙŠØ¬':['images/31d41d6d-19dd-4e78-b87c-55938abf6324.jpg','images/dcda5065-d609-4434-b8e6-064e3f634acb.jpg','images/f09ddeb3-86bb-4449-a7f2-7f61d4071dca.jpg']}},
{id:'j3', type:'jacket', title:'Ø¨Ù„ÙˆÙØ± Ø´ØªÙˆÙŠ Ø£Ø²Ø±Ù‚', price:149, colors:['Ø£Ø²Ø±Ù‚','Ø£Ø­Ù…Ø±','Ø£Ø²Ø±Ù‚ ØºØ§Ù…Ù‚'], images:{'Ø£Ø²Ø±Ù‚':['images/IMG_9793.png'],'Ø£Ø­Ù…Ø±':['images/IMG_9794.png'],'Ø£Ø²Ø±Ù‚ ØºØ§Ù…Ù‚':['images/IMG_9795.png']}},
  {id:'c1',type:'jacket',title:'Ø¬Ø§ÙƒÙŠØª Ø£Ù†ÙŠÙ‚ ',price:19,colors:['Ø´ÙØ§Ù'],images:{'Ø´ÙØ§Ù':['images/e0287c8e-c965-40fd-b51f-137e23f0ea13.jpg']}},
  {id:'c2',type:'case',title:'ÙƒÙØ± Ø¬Ù„Ø¯',price:29,colors:['Ø¨Ù†ÙŠ'],images:{'Ø¨Ù†ÙŠ':['images/IMG_9756.png']}},
{id:'j4', type:'jacket', title:'Ø¨Ù„ÙˆÙØ± Ø´ØªÙˆÙŠ Ø±Ù…Ø§Ø¯ÙŠ', price:120, colors:['Ø£Ø²Ø±Ù‚ ØºØ§Ù…Ù‚','Ø±Ù…Ø§Ø¯ÙŠ Ø¯Ø§ÙƒÙ†','Ø­Ù„ÙŠØ¨ÙŠ','Ø±ØµØ§ØµÙŠ'], images:{'Ø£Ø²Ø±Ù‚ ØºØ§Ù…Ù‚':['images/IMG_9798.png'],'Ø±Ù…Ø§Ø¯ÙŠ Ø¯Ø§ÙƒÙ†':['images/IMG_9799.png'],'Ø­Ù„ÙŠØ¨ÙŠ':['images/IMG_9800.png'],'Ø±ØµØ§ØµÙŠ':['images/IMG_9801.png']}},
     {id:'p1',type:'jacket',title:'Ø¨Ù„ÙˆÙØ± Ø´ØªÙˆÙŠ',price:7.5,colors:['Ø£Ø³ÙˆØ¯'],images:{'Ø£Ø³ÙˆØ¯':['images/3fcf2538-a88d-4ae3-bee3-34243c65a78b.jpg']}},
  {id:'p2',type:'jacket',title:'Ø¨Ù„ÙˆÙØ± Ø´ØªÙˆÙŠ',price:7.5,colors:['Ø£Ø³ÙˆØ¯'],images:{'Ø£Ø³ÙˆØ¯':['images/5a413d54-b961-40f8-8806-3b82692eccb2.jpg']}},
  {id:'p3',type:'jacket',title:'Ø¨Ù„ÙˆÙØ± Ø´ØªÙˆÙŠ',price:7.5,colors:['Ø£Ø³ÙˆØ¯'],images:{'Ø£Ø³ÙˆØ¯':['images/6d0f7951-04ce-44e7-92be-d6c048f3685d.jpg']}},
  {id:'p4',type:'jacket',title:'Ø¨Ù„ÙˆÙØ± Ø´ØªÙˆÙŠ',price:7.5,colors:['Ø£Ø³ÙˆØ¯'],images:{'Ø£Ø³ÙˆØ¯':['images/20f0eb3e-0131-4d30-b4d7-8b4317adbcae.jpg']}},
  {id:'p5',type:'jacket',title:'Ø¨Ù„ÙˆÙØ± Ø´ØªÙˆÙŠ',price:7.5,colors:['Ø£Ø³ÙˆØ¯'],images:{'Ø£Ø³ÙˆØ¯':['images/25ce02af-c3f7-4f41-b1d4-d558f8206da6.jpg']}},
  {id:'p6',type:'jacket',title:'Ø¨Ù„ÙˆÙØ± Ø´ØªÙˆÙŠ',price:7.5,colors:['Ø£Ø³ÙˆØ¯'],images:{'Ø£Ø³ÙˆØ¯':['images/62f5ed32-cfcc-43ff-a7e6-68b78262cbbe.jpg']}},
  {id:'p7',type:'jacket',title:'Ø¨Ù„ÙˆÙØ± Ø´ØªÙˆÙŠ',price:7.5,colors:['Ø£Ø³ÙˆØ¯'],images:{'Ø£Ø³ÙˆØ¯':['images/76c07d93-ecfb-40c3-91d0-d76372c8fc0a.jpg']}},
  {id:'p8',type:'jacket',title:'Ø¨Ù„ÙˆÙØ± Ø´ØªÙˆÙŠ',price:7.5,colors:['Ø£Ø³ÙˆØ¯'],images:{'Ø£Ø³ÙˆØ¯':['images/96e5a320-7dc9-4034-a896-506b2bef7310.jpg']}},
  {id:'p9',type:'jacket',title:'Ø¨Ù„ÙˆÙØ± Ø´ØªÙˆÙŠ',price:7.5,colors:['Ø£Ø³ÙˆØ¯'],images:{'Ø£Ø³ÙˆØ¯':['images/59225a25-296e-4acf-a32d-301536500c88.jpg']}},
  {id:'p10',type:'jacket',title:'Ø¨Ù„ÙˆÙØ± Ø´ØªÙˆÙŠ',price:7.5,colors:['Ø£Ø³ÙˆØ¯'],images:{'Ø£Ø³ÙˆØ¯':['images/686525b5-7ecb-412b-b572-3484528e4e8a.jpg']}},
  {id:'p11',type:'jacket',title:'Ø¨Ù„ÙˆÙØ± Ø´ØªÙˆÙŠ',price:7.5,colors:['Ø£Ø³ÙˆØ¯'],images:{'Ø£Ø³ÙˆØ¯':['images/69467239-7bed-4c15-970b-f9d11b1c66ce.jpg']}},
  {id:'p12',type:'jacket',title:'Ø¨Ù„ÙˆÙØ± Ø´ØªÙˆÙŠ',price:7.5,colors:['Ø£Ø³ÙˆØ¯'],images:{'Ø£Ø³ÙˆØ¯':['images/b2c341cd-0bb9-438f-8c59-3e7316010d81.jpg']}},
  {id:'p13',type:'jacket',title:'Ø¨Ù„ÙˆÙØ± Ø´ØªÙˆÙŠ',price:7.5,colors:['Ø£Ø³ÙˆØ¯'],images:{'Ø£Ø³ÙˆØ¯':['images/bbd94287-d59c-4127-8755-a24b1e575bb2.jpg']}},
  {id:'p14',type:'jacket',title:'Ø¨Ù„ÙˆÙØ± Ø´ØªÙˆÙŠ',price:7.5,colors:['Ø£Ø³ÙˆØ¯'],images:{'Ø£Ø³ÙˆØ¯':['images/bc5ac061-9022-4251-9d0c-acf16c859461.jpg']}},
  {id:'p15',type:'jacket',title:'Ø¨Ù„ÙˆÙØ± Ø´ØªÙˆÙŠ',price:7.5,colors:['Ø£Ø³ÙˆØ¯'],images:{'Ø£Ø³ÙˆØ¯':['images/c27c2fcf-cc72-4840-82ea-83596dd7d90b.jpg']}},
  {id:'p16',type:'jacket',title:'Ø¨Ù„ÙˆÙØ± Ø´ØªÙˆÙŠ',price:7.5,colors:['Ø£Ø³ÙˆØ¯'],images:{'Ø£Ø³ÙˆØ¯':['images/cb9c316d-281b-406b-94d6-fd8902a80cb5.jpg']}},
  {id:'p17',type:'jacket',title:'Ø¨Ù„ÙˆÙØ± Ø´ØªÙˆÙŠ',price:7.5,colors:['Ø£Ø³ÙˆØ¯'],images:{'Ø£Ø³ÙˆØ¯':['images/d8d4f19a-642f-41e1-9290-f441f7eb43bb.jpg']}},
  {id:'p18',type:'jacket',title:'Ø¨Ù„ÙˆÙØ± Ø´ØªÙˆÙŠ',price:7.5,colors:['Ø£Ø³ÙˆØ¯'],images:{'Ø£Ø³ÙˆØ¯':['images/daabfdd0-9a4a-4915-a4df-0413d58b777a.jpg']}},
    {id:'np1', type:'glases', title:'Ù†Ø¸Ø§Ø±Ø§Øª', price:2.5, colors:['Ø£Ø³ÙˆØ¯'], images:{'Ø£Ø³ÙˆØ¯':['images/8d377c07-fb45-4650-9760-40748c21cb8d.jpg','images/9ffdf603-37a5-4729-850a-6a38eb520f19.jpg','images/5780f9d7-cb68-43d3-94f7-60a0b954acd5.jpg']}},
  {id:'np2', type:'glases', title:'Ù†Ø¸Ø§Ø±Ø§Øª', price:2.5, colors:['Ø£Ø³ÙˆØ¯'], images:{'Ø£Ø³ÙˆØ¯':['images/01c5618a-460c-46c0-bacb-45daea6b1ed8.jpg','images/ea00c5fa-8b0a-4508-872a-f48f08ad0939.jpg','images/e607e0d2-0fda-4d60-bac4-994e8938d26c.jpg']}},
  {id:'np3', type:'glases', title:'Ù†Ø¸Ø§Ø±Ø§Øª', price:2.5, colors:['Ø£Ø³ÙˆØ¯'], images:{'Ø£Ø³ÙˆØ¯':['images/dff750f4-c1d7-40de-9006-012cee20ca05.jpg','images/0874a0ea-12bf-4274-9f0d-fc44480897dc.jpg','images/8b26bbfb-32dd-4d2b-af43-f1ef098d7a78.jpg']}},
  {id:'np4', type:'glases', title:'Ù†Ø¸Ø§Ø±Ø§Øª', price:2.5, colors:['Ø£Ø³ÙˆØ¯'], images:{'Ø£Ø³ÙˆØ¯':['images/1d6d615a-e0e6-40e2-bc6a-d9896ef80008.jpg']}},
  {id:'np5', type:'glases', title:'Ù†Ø¸Ø§Ø±Ø§Øª', price:2.5, colors:['Ø£Ø³ÙˆØ¯'], images:{'Ø£Ø³ÙˆØ¯':['images/f09d6157-8a72-4248-ac2e-d6b70a63758a.jpg','images/c7b1b829-d1c6-4c5c-bedf-be61de435f1e.jpg']}},
  {id:'np6', type:'glases', title:'Ù†Ø¸Ø§Ø±Ø§Øª', price:2.5, colors:['Ø£Ø³ÙˆØ¯'], images:{'Ø£Ø³ÙˆØ¯':['images/957ced73-f390-4a6d-af11-e725917b148d.jpg','images/09097d67-234b-4620-9895-b06fd216584f.jpg','images/c999885d-2c74-45f1-a2c2-a7d207e19870.jpg']}},
  {id:'np7', type:'glases', title:'Ù†Ø¸Ø§Ø±Ø§Øª', price:2.5, colors:['Ø£Ø³ÙˆØ¯'], images:{'Ø£Ø³ÙˆØ¯':['images/71c02e1f-93f7-4cfd-a235-d8ab5a5470ae.jpg','images/5aab4386-ef86-4b27-924a-688ffed308ce.jpg','images/f263b02c-a407-4085-8e9c-92deab044f2b.jpg']}},
  {id:'np8', type:'glases', title:'Ù†Ø¸Ø§Ø±Ø§Øª', price:2.5, colors:['Ø£Ø³ÙˆØ¯'], images:{'Ø£Ø³ÙˆØ¯':['images/078f9c76-c6e0-4122-b9db-2e6b86ac5b4a.jpg','images/52e12d48-fa7f-4d04-8c60-8bbbc4226e17.jpg','images/20fdbef1-c36b-4bc0-9e1f-ff5a6a12495a.jpg']}},
  {id:'np9', type:'glases', title:'Ù†Ø¸Ø§Ø±Ø§Øª', price:2.5, colors:['Ø£Ø³ÙˆØ¯'], images:{'Ø£Ø³ÙˆØ¯':['images/f1d768c0-5f75-471c-a10f-c9144ec320d9.jpg','images/897d9d8d-8ef2-4348-8bd3-73f69d21b973.jpg']}},
  {id:'np10', type:'glases', title:'Ù†Ø¸Ø§Ø±Ø§Øª', price:3, colors:['Ø£Ø³ÙˆØ¯'], images:{'Ø£Ø³ÙˆØ¯':['images/2ed1e6fb-2aa0-4835-a209-284f5b9ff334.jpg','images/68fcb4a6-1bb4-482f-acd6-82f9d133fe52.jpg','images/cc4b538d-38af-453e-9aed-c18bfb79e8fb.jpg','images/d1a45a6c-b8bb-4a4b-816f-e675b6c99245.jpg']}},
  {id:'np11', type:'glases', title:'Ù†Ø¸Ø§Ø±Ø§Øª', price:3, colors:['Ø£Ø³ÙˆØ¯'], images:{'Ø£Ø³ÙˆØ¯':['images/7ffc8fe3-777a-4819-b6fb-a9aa0dd42682.jpg','images/a2d9121a-fc00-4af3-a597-6568e8ecfa56.jpg','images/a2ec9a83-87ce-4242-9a50-b718fe7214a3.jpg','images/afe41fb0-4be1-4d83-ac95-03b7d9bb51dc.jpg']}},
  {id:'s1', type:'shoes', title:'Ø­Ø°Ø§Ø¡', price:12, colors:['Ø£Ø¨ÙŠØ¶'], images:{'Ø£Ø¨ÙŠØ¶':['images/e5e82666-16f6-4cf5-90fe-87c585d44200.jpg']}},
{id:'s2', type:'shoes', title:'Ø­Ø°Ø§Ø¡', price:12, colors:['Ø£Ø¨ÙŠØ¶'], images:{'Ø£Ø¨ÙŠØ¶':['images/441e122a-3510-4dcb-8942-0dd4d220db33.jpg','images/1d5e961a-85d6-4331-be59-b25232dba765.jpg']}},
{id:'s3', type:'shoes', title:'Ø­Ø°Ø§Ø¡', price:13.5, colors:['Ø£Ø¨ÙŠØ¶'], images:{'Ø£Ø¨ÙŠØ¶':['images/ab986aa5-36a7-4b94-abd2-728682d0e412.jpg','images/0d89d5cf-3070-4268-9f8a-8316af74f28c.jpg']}},
{id:'s4', type:'shoes', title:'Ø­Ø°Ø§Ø¡', price:15, colors:['Ø£Ø¨ÙŠØ¶'], images:{'Ø£Ø¨ÙŠØ¶':['images/79cf6efd-f571-4b13-8150-d1f402c85329.jpg']}},
{id:'s5', type:'shoes', title:'Ø­Ø°Ø§Ø¡', price:12, colors:['Ø£Ø¨ÙŠØ¶'], images:{'Ø£Ø¨ÙŠØ¶':['images/007ccfc5-019d-4ba3-9ccd-53b62136de20.jpg','images/35937633-c9cb-49f8-9692-0671b779bf9e.jpg']}}
];

let cart = [];
let selectedCurrency = 'OMR';

function render() {
  const grid = document.getElementById('products');
  grid.innerHTML = '';
  products.forEach(p=>{
    const card = document.createElement('div');
    card.className='card';
    card.innerHTML=`
      <div class="card-img"><img src="${p.images[p.colors[0]][0]}" alt="${p.title}"></div>
      <h4>${p.title}</h4>
      <p>${p.price} ${selectedCurrency}</p>
      <button class="btn" onclick="showDetails('${p.id}')">Ø§Ù„ØªÙØ§ØµÙŠÙ„</button>
<div id="orderSuccessBox" style="display:none;margin-top:15px;padding:15px;border-radius:10px;background:#e8fff1;border:1px solid #2ecc71;color:#145a32;font-size:15px;">
  ğŸ’Œ <strong>ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­</strong><br>
  <span id="orderNumberText"></span>
</div>
    `;
    grid.appendChild(card);
  });

  // Ø£Ù„ÙˆØ§Ù† Ø§Ù„ÙÙ„ØªØ±Ø©
  const colorsDiv = document.getElementById('colorFilter');
  const allColors = [...new Set(products.flatMap(p=>p.colors))];
  colorsDiv.innerHTML = allColors.map(c=>`<button class="btn" onclick="filterColor('${c}')">${c}</button>`).join('');
}

// Ø¹Ù†Ø¯ Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø¯ÙØ¹ØŒ Ø¹Ø±Ø¶ Ø§Ù„ÙØ§ØªÙˆØ±Ø©
document.getElementById('checkoutForm').addEventListener('submit', function(e){
  e.preventDefault();
  if(cart.length===0) return alert('Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©!');
  
  // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ø§Ù„ÙØ§ØªÙˆØ±Ø©
function showInvoice() {
  document.getElementById('checkoutPage').style.display='none';
  const invoiceDiv = document.getElementById('invoicePage');
  const invoiceProducts = document.getElementById('invoiceProducts');
  invoiceProducts.innerHTML = '';
  let total = 0;
  cart.forEach(item => {
    total += item.price * item.qty;
    const div = document.createElement('div');
    div.className='invoice-item';
    div.innerHTML = `<span>${item.title} - ${item.color} Ã— ${item.qty}</span> <span>${(item.price*item.qty).toFixed(2)} ${selectedCurrency}</span>`;
    invoiceProducts.appendChild(div);
  });
  document.getElementById('invoiceTotal').innerText = total.toFixed(2);
  document.getElementById('invoiceCurrency').innerText = selectedCurrency;
  invoiceDiv.style.display='block';
}

function showInvoice() {
  document.getElementById('checkoutPage').style.display='none';
  const invoiceDiv = document.getElementById('invoicePage');
  const invoiceProducts = document.getElementById('invoiceProducts');
  invoiceProducts.innerHTML = '';
  let total = 0;
  cart.forEach(item => {
    total += item.price * item.qty;
    const div = document.createElement('div');
    div.className='invoice-item';
    div.innerHTML = `<span>${item.title} - ${item.color} Ã— ${item.qty}</span> <span>${(item.price*item.qty).toFixed(2)} ${selectedCurrency}</span>`;
    invoiceProducts.appendChild(div);
  });
  document.getElementById('invoiceTotal').innerText = total.toFixed(2);
  document.getElementById('invoiceCurrency').innerText = selectedCurrency;
  invoiceDiv.style.display='block';
}

function printInvoice(){
  const printContents = document.getElementById('invoicePage').innerHTML;
  const originalContents = document.body.innerHTML;
  document.body.innerHTML = printContents;
  window.print();
  document.body.innerHTML = originalContents;
  location.reload(); // Ù„Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯ Ø¨Ø¹Ø¯ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©
}

// ØªØ¹Ø¯ÙŠÙ„ goToCheckout Ù„ØªØ¸Ù‡Ø± Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø¯ÙØ¹ Ù…Ø¨Ø§Ø´Ø±Ø©
document.getElementById('checkoutForm').addEventListener('submit', function(e){
  e.preventDefault();
  showInvoice();
});

function printInvoice(){
  const printContents = document.getElementById('invoicePage').innerHTML;
  const originalContents = document.body.innerHTML;
  document.body.innerHTML = printContents;
  window.print();
  document.body.innerHTML = originalContents;
  location.reload(); // Ù„Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯ Ø¨Ø¹Ø¯ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©
}

// ØªØ¹Ø¯ÙŠÙ„ goToCheckout Ù„ØªØ¸Ù‡Ø± Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø¯ÙØ¹ Ù…Ø¨Ø§Ø´Ø±Ø©
document.getElementById('checkoutForm').addEventListener('submit', function(e){
  e.preventDefault();
  showInvoice();
});
  document.getElementById('invoiceTotal').innerText = total.toFixed(2) + ' ' + selectedCurrency;
  
  document.getElementById('invoiceModal').classList.add('show');

  // Ù…Ø³Ø­ Ø§Ù„Ø³Ù„Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø¯ÙØ¹
  cart = [];
  document.getElementById('cartCount').innerText = 0;
  renderCart();
  document.getElementById('checkoutPage').style.display='none';
  document.getElementById('mainContent').style.display='block';
});

// Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ÙØ§ØªÙˆØ±Ø©
function closeInvoice(){
  document.getElementById('invoiceModal').classList.remove('show');
}


function filterCategory(cat){
  document.querySelectorAll('aside .btn').forEach(b=>b.classList.remove('active'));
  event.target.classList.add('active');
  const filtered = cat==='all'?products:products.filter(p=>p.type===cat);
  renderFiltered(filtered);
}

function filterColor(color){
  const filtered = products.filter(p=>p.colors.includes(color));
  renderFiltered(filtered);
}

function renderFiltered(list){
  const grid = document.getElementById('products');
  grid.innerHTML = '';
  list.forEach(p=>{
    const card = document.createElement('div');
    card.className='card';
    card.innerHTML=`
      <div class="card-img"><img src="${p.images[p.colors[0]][0]}" alt="${p.title}"></div>
      <h4>${p.title}</h4>
      <p>${p.price} ${selectedCurrency}</p>
      <button class="btn" onclick="showDetails('${p.id}')">Ø§Ù„ØªÙØ§ØµÙŠÙ„</button>
<div id="orderSuccessBox" style="display:none;margin-top:15px;padding:15px;border-radius:10px;background:#e8fff1;border:1px solid #2ecc71;color:#145a32;font-size:15px;">
  ğŸ’Œ <strong>ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­</strong><br>
  <span id="orderNumberText"></span>
</div>
    `;
    grid.appendChild(card);
  });
}

function showDetails(id){
Â  const product = products.find(p=>p.id===id);
Â  if(!product) return;
Â  let selectedColor = product.colors[0]; // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ

Â  function renderColorButtons(){
Â  Â  // Ù…Ù„Ø§Ø­Ø¸Ø©: Ø¥Ø¶Ø§ÙØ© data-color Ù„ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ù†Ø´Ø· Ù„Ø§Ø­Ù‚Ø§Ù‹
Â  Â  return product.colors.map(c=>`<button class="btn ${c===selectedColor?'active':''}" data-color="${c}" onclick="changeModalColor('${id}','${c}', this)">${c}</button>`).join('');
Â  }

Â  function renderImages(color){
Â  Â  // Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…ØµØºØ±Ø©
Â  Â  return product.images[color].map((img,index)=>`<img class="thumbnail ${index===0?'active':''}" src="${img}" onclick="showImage('${img}', this)">`).join('');
Â  }

Â  document.getElementById('modalBox').innerHTML = `
Â  Â  <h2>${product.title}</h2>
Â  Â  <div class="colors" id="modalColors">${renderColorButtons()}</div>
Â  Â  <img id="mainImage" src="${product.images[selectedColor][0]}" style="width:100%; border-radius:12px; margin-bottom:10px;">
Â  Â  <div id="modalThumbnails">${renderImages(selectedColor)}</div>
Â  Â  <button class="btn" id="addToCartBtn">Ø£Ø¶Ù Ù„Ù„Ø³Ù„Ø©</button>
<div id="orderSuccessBox" style="display:none;margin-top:15px;padding:15px;border-radius:10px;background:#e8fff1;border:1px solid #2ecc71;color:#145a32;font-size:15px;">
  ğŸ’Œ <strong>ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­</strong><br>
  <span id="orderNumberText"></span>
</div>
Â  Â  <button class="btn" onclick="closeModal()">Ø¥ØºÙ„Ø§Ù‚</button>
<div id="orderSuccessBox" style="display:none;margin-top:15px;padding:15px;border-radius:10px;background:#e8fff1;border:1px solid #2ecc71;color:#145a32;font-size:15px;">
  ğŸ’Œ <strong>ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­</strong><br>
  <span id="orderNumberText"></span>
</div>
Â  `;

Â  // ğŸ”‘ Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø£Ù‡Ù…: ØªØ¹ÙŠÙŠÙ† ÙˆØ¸ÙŠÙØ© Ø§Ù„Ù†Ù‚Ø± (onclick) Ù„Ù„Ø²Ø± Ø¨Ø´ÙƒÙ„ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ
Â  const cartBtn = document.getElementById('addToCartBtn');
Â  cartBtn.onclick = function(event) {
Â  Â  // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø²Ø± Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ù†Ø´Ø· Ø­Ø§Ù„ÙŠØ§Ù‹ ÙˆØ§Ø³ØªØ®Ø±Ø§Ø¬ Ù‚ÙŠÙ…Ø© data-color
Â  Â  const activeColorBtn = document.querySelector('#modalBox .colors .btn.active');
Â  Â  const currentColor = activeColorBtn ? activeColorBtn.dataset.color : product.colors[0];
Â  Â  addToCart(id, currentColor, event.target);
Â  };
Â  
Â  document.getElementById('modal').classList.add('show');
}

function changeModalColor(id,color,btn){
  const product = products.find(p=>p.id===id);
  document.querySelectorAll('#modalBox .btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  const mainImage = document.getElementById('mainImage');
  mainImage.src = product.images[color][0];
  const thumbnails = document.querySelectorAll('#modalBox .thumbnail');
  thumbnails.forEach((t,i)=>{t.src=product.images[color][i]; t.classList.remove('active');});
}

function showImage(src,el){
  document.getElementById('mainImage').src = src;
  document.querySelectorAll('#modalBox .thumbnail').forEach(t=>t.classList.remove('active'));
  el.classList.add('active');
}

function closeModal(){ document.getElementById('modal').classList.remove('show'); }

function addToCart(id,color,btn){
  const product = products.find(p=>p.id===id);

  // Ø£Ù†ÙŠÙ…ÙŠØ´Ù†
  const img = document.createElement('img');
  img.src = product.images[color][0];
  img.className='fly-img';
  document.body.appendChild(img);
  const rect = btn.getBoundingClientRect();
  img.style.left = rect.left+'px';
  img.style.top = rect.top+'px';
  const cartIcon = document.getElementById('cartIcon');
  const cartRect = cartIcon.getBoundingClientRect();
  img.style.setProperty('--x', (cartRect.left-rect.left)+'px');
  img.style.setProperty('--y', (cartRect.top-rect.top)+'px');
  img.addEventListener('animationend',()=>{img.remove();});

  // ØªØ­Ù‚Ù‚ Ø¥Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„
  const existing = cart.find(c=>c.id===id && c.color===color);
  if(existing){ existing.qty++; } 
  else { cart.push({id,color,price:product.price,title:product.title,img:product.images[color][0],qty:1}); }
  
  document.getElementById('cartCount').innerText = cart.reduce((a,b)=>a+b.qty,0);
  renderCart();
  closeModal();
}

function renderCart(){
  const cartDiv = document.getElementById('cartContent');
  cartDiv.innerHTML = '';
  let total = 0;
  cart.forEach((item,index)=>{
    total += item.price*item.qty;
    const div = document.createElement('div');
    div.className='cart-item';
    div.innerHTML=`
      <img src="${item.img}">
      <div class="cart-item-details">
        <span>${item.title}</span>
        <span>Ø§Ù„Ù„ÙˆÙ†: ${item.color}</span>
        <span>${item.price} ${selectedCurrency}</span>
      </div>
      <div class="cart-item-controls">
        <button onclick="changeQty(${index}, -1)">-</button>
<div id="orderSuccessBox" style="display:none;margin-top:15px;padding:15px;border-radius:10px;background:#e8fff1;border:1px solid #2ecc71;color:#145a32;font-size:15px;">
  ğŸ’Œ <strong>ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­</strong><br>
  <span id="orderNumberText"></span>
</div>
        <span>${item.qty}</span>
        <button onclick="changeQty(${index}, 1)">+</button>
<div id="orderSuccessBox" style="display:none;margin-top:15px;padding:15px;border-radius:10px;background:#e8fff1;border:1px solid #2ecc71;color:#145a32;font-size:15px;">
  ğŸ’Œ <strong>ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­</strong><br>
  <span id="orderNumberText"></span>
</div>
        <button onclick="removeFromCart(${index})">Ø­Ø°Ù</button>
<div id="orderSuccessBox" style="display:none;margin-top:15px;padding:15px;border-radius:10px;background:#e8fff1;border:1px solid #2ecc71;color:#145a32;font-size:15px;">
  ğŸ’Œ <strong>ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­</strong><br>
  <span id="orderNumberText"></span>
</div>
      </div>
    `;
    cartDiv.appendChild(div);
  });
  document.getElementById('cartTotal').innerText = total.toFixed(2);
}

function changeQty(idx,val){
  cart[idx].qty += val;
  if(cart[idx].qty<=0) cart.splice(idx,1);
  document.getElementById('cartCount').innerText = cart.reduce((a,b)=>a+b.qty,0);
  renderCart();
}

function removeFromCart(idx){
  cart.splice(idx,1);
  document.getElementById('cartCount').innerText = cart.reduce((a,b)=>a+b.qty,0);
  renderCart();
}

function toggleCart(){
  const dropdown = document.getElementById('cartDropdown');
  dropdown.style.display = dropdown.style.display==='block'?'none':'block';
}

function goToCheckout(){
  document.getElementById('mainContent').style.display='none';
  document.getElementById('checkoutPage').style.display='block';
  const checkoutDiv = document.getElementById('checkoutProducts');
  checkoutDiv.innerHTML = '';
  cart.forEach(item=>{
    const div = document.createElement('div');
    div.innerHTML=`${item.title} - ${item.color} - ${item.price} ${selectedCurrency} Ã— ${item.qty}`;
    checkoutDiv.appendChild(div);
  });
}

function selectCurrency(btn){
  document.querySelectorAll('.currency-btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  selectedCurrency = btn.dataset.currency;
  render();
  renderCart();
}

render();
</script>

<script>
(function(){
  emailjs.init("x40PxDimMNr7k4z6j");
})();

function sendInvoiceEmail(){
  const email = document.getElementById('manualEmail').value;
  if(!email){
    alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ');
    return;
  }

  const params = {
    to_email: email,
    message: buildInvoiceText(),
    reply_to: "abodalfarsi99@gmail.com"
  };

  emailjs.send("service_qa3n7l","template_aphzj8p",params)
    .then(()=>alert("ğŸ’Œ ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­"))
    .catch(e=>{
      alert("âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„");
      console.log(e);
    });
}
</script>


<script>
/* ===== ØªÙˆÙ„ÙŠØ¯ Ù†Øµ Ø§Ù„ÙØ§ØªÙˆØ±Ø© (Ø¥Ø¶Ø§ÙØ© Ø¢Ù…Ù†Ø©) ===== */
function buildInvoiceText() {
  let text = "ÙØ§ØªÙˆØ±Ø© Ø´Ø±Ø§Ø¡ Ù…Ù† FATMA COLLECTION\n\n";

  const items = document.querySelectorAll('.cart-item');
  if (!items || items.length === 0) {
    text += "- Ù…Ù†ØªØ¬ ÙˆØ§Ø­Ø¯\n";
  } else {
    items.forEach(item => {
      const name = item.querySelector('.item-name')?.innerText || 'Ù…Ù†ØªØ¬';
      const qty = item.querySelector('.qty')?.innerText || '1';
      const price = item.querySelector('.item-price')?.innerText || '';
      text += `- ${name} Ã— ${qty} ${price}\n`;
    });
  }

  const total =
    document.querySelector('.total-price')?.innerText ||
    document.querySelector('.total')?.innerText ||
    'OMR 0.00';

  text += `\nØ§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ: ${total}\n\n`;
  text += "ğŸ’Œ Ø´ÙƒØ±Ù‹Ø§ Ù„ØªØ³ÙˆÙ‚Ùƒ Ù…Ù† FATMA COLLECTION";

  return text;
}
</script>

<script>
/* ===== Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨ ===== */
function generateOrderNumber() {
  return "FC-" + Date.now().toString().slice(-6);
}

/* ===== ØªÙˆÙ„ÙŠØ¯ Ù†Øµ Ø§Ù„ÙØ§ØªÙˆØ±Ø© ===== */
function buildInvoiceText() {
  const orderNumber = window.currentOrderNumber || generateOrderNumber();
  window.currentOrderNumber = orderNumber;

  let text = "ÙØ§ØªÙˆØ±Ø© Ø´Ø±Ø§Ø¡ Ù…Ù† FATMA COLLECTION\n";
  text += "Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨: " + orderNumber + "\n\n";

  const items = document.querySelectorAll('.cart-item');
  if (!items || items.length === 0) {
    text += "- Ù…Ù†ØªØ¬ ÙˆØ§Ø­Ø¯\n";
  } else {
    items.forEach(item => {
      const name = item.querySelector('.item-name')?.innerText || 'Ù…Ù†ØªØ¬';
      const qty = item.querySelector('.qty')?.innerText || '1';
      const price = item.querySelector('.item-price')?.innerText || '';
      text += `- ${name} Ã— ${qty} ${price}\n`;
    });
  }

  const total =
    document.querySelector('.total-price')?.innerText ||
    document.querySelector('.total')?.innerText ||
    'OMR 0.00';

  text += `\nØ§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„ÙƒÙ„ÙŠ: ${total}\n\n`;
  text += "ğŸ’Œ Ø´ÙƒØ±Ù‹Ø§ Ù„ØªØ³ÙˆÙ‚Ùƒ Ù…Ù† FATMA COLLECTION";

  return text;
}

/* ===== Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø¨Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ ===== */
function sendInvoiceEmail() {
  const emailInput = document.querySelector('input[type="email"], input[value*="@"]');
  const toEmail = emailInput ? emailInput.value.trim() : '';

  if (!toEmail) {
    alert("âŒ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ");
    return;
  }

  const templateParams = {
    to_email: toEmail,
    message: buildInvoiceText()
  };

  emailjs.send(
    "service_qa3nl7l",
    "template_aphzj8p",
    templateParams
  )
  .then(function () {
    
document.getElementById("orderNumberText").innerText = "Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨: " + window.currentOrderNumber;
document.getElementById("orderSuccessBox").style.display = "block";

// Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø³Ù„Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø¯ÙØ¹
const cartBox = document.querySelector(".cart-box") || document.querySelector(".cart");
if(cartBox){ cartBox.style.display = "none"; }

  })
  .catch(function (error) {
    console.error("EmailJS Error:", error);
    alert("âŒ Ù„Ù… ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙØ§ØªÙˆØ±Ø©");
  });
}
</script>

</body>

</html>
